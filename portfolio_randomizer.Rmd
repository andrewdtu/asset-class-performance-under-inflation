---
title: "portfolio randomizer"
author: "Andrew Tu"
date: "4/5/2022"
output: pdf_document
---

```{r setup, include=FALSE}
library(tidyverse)
period1 <- read_csv('stock_period1.csv')
colnames(period1)[1] <- 'col1'
period1 <- period1%>%
  column_to_rownames('col1')


period2 <- read_csv('stock_period2.csv')
colnames(period2)[1] <- 'col1'
period2 <- period2%>%
  column_to_rownames('col1')
```


```{r period 1}
n_1 = 1000

portfolio = data.frame()
portfolio$returns <- double()
portfolio$sd <- double()
portfolio$`returns/sd` <- double()

weights_array = list()


total_returns = as.double(((tail(period1,1)-head(period1,1))/head(period1,1))[1,])
num_of_portfolios = n_1
num_of_stocks = ncol(period1)
stock_returns = lead(period1,1)/period1-1

for (i in 1:num_of_portfolios){
  rnd_nums = runif(12)
  weights = rnd_nums/sum(rnd_nums)
  
  weights_array <- append(weights_array,weights)
  portfolio[i,'returns'] <- sum(total_returns*weights)
  portfolio_returns <- stock_returns*t(weights)
  portfolio[i,'sd'] <- sd(na.omit(rowSums(portfolio_returns)))*sqrt(252)
  portfolio[i,'returns/sd'] <- (portfolio[i,1])/as.double(portfolio[i,2])
  
  
   
  
}

ggplot(portfolio)+
 geom_point(aes(x=sd,y=returns))



```
```{r period2}
n_2 = 1000

portfolio = data.frame()
portfolio$returns <- double()
portfolio$sd <- double()
portfolio$`returns/sd` <- double()

weights_array = list()


total_returns = as.double(((tail(period2,1)-head(period2,1))/head(period2,1))[1,])
num_of_portfolios = n_1
num_of_stocks = ncol(period2)
stock_returns = lead(period2,1)/period2-1

for (i in 1:num_of_portfolios){
  rnd_nums = runif(12)
  weights = rnd_nums/sum(rnd_nums)
  
  weights_array <- append(weights_array,weights)
  portfolio[i,'returns'] <- sum(total_returns*weights)
  portfolio_returns <- stock_returns*t(weights)
  portfolio[i,'sd'] <- sd(na.omit(rowSums(portfolio_returns)))*sqrt(252)
  portfolio[i,'returns/sd'] <- (portfolio[i,1])/as.double(portfolio[i,2])
  
  
   
  
}

ggplot(portfolio)+
 geom_point(aes(x=sd,y=returns))




```

